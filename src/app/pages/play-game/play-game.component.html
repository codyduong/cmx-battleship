
@if (userSessions.sessionInfo(); as session) {

  <div class="app-title">
    <h1>Welcome to battleship {{ session.player_name }}</h1>
      @if (game.active) {
        <div class="flex-row col-gap-1">
          <button class="game-button" (click)="handleExit()">Exit</button>

          <button
            class="game-button"
            (click)="handleStartGame()"
            [disabled]="!shipSelection.readyToPlay"
          >Play</button>

          <button
            *ngIf="game.phase==='goodg'"
            class="game-button"
            (click)="handleMakeSelection()"
            [disabled]="!game.currentSelection || !game.activeTurn"
          >Hit</button>
        </div>


        @if (game.doneWithSelection) {
          <!-- game messages -->
          @if (game.phase === 'selct') {
            <h3>Waiting for other player...</h3>
          } @else if (game.activeTurn) {
           <h3>Your turn!</h3>
          } @else if (!game.activeTurn) {
            <h3>Your opponents turn!</h3>
          } @else {
            <h3>&nbsp;</h3>
          }
        } @else if (!game.doneWithSelection && shipSelection.active) {
          <h3>
            Please begin by placing your
            {{ session.num_ships === '1'? 'ship' : session.num_ships + ' ships' }}
            ...
          </h3>
        } @else if (shipSelection.active) {
          <!-- ship errors -->
          <h3 class="error-text">{{ shipSelection.error ?? '&nbsp;' }}</h3>
        } @else {
          <h3>&nbsp;</h3>
        }
      }
    </div>

  <div *ngIf="game.active" class="app-body mx-auto">

    @if (shipSelection.active) {
      <div class="app-ship-selector flex-wrap mt-2">
        @for (ship of [1,2,3,4,5].slice(0, $any(session.num_ships)); track ship) {
          <app-game-ship [shipLength]="ship"/>
        }
      </div>
    }

    <app-gameboard class="app-gameboard"></app-gameboard>

  </div>

}

