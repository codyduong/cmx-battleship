
@if (userSessions.sessionInfo(); as session) {

  <div class="app-title">
    <h1 class="game-subtitle">{{ currentMessage() }}</h1>

    <div class="flex-row">

      <div *ngIf="game.session?.game_state as state" class="flex-col">
        <span>Ships remaining: {{ state.my_ships_remaining }}</span>
        <span>Enemy ships remaining: {{ state.ships_remaining }}</span>
        <span>Your hit tiles: {{ state.my_hit_tile_ids }}</span>
        <span>Your healthy tiles: {{ state.my_miss_tile_ids }}</span>

      </div>

      <div class="flex-col">
        @if (game.loading) {
<!--          <p>get info</p>-->
        } @else if (game.active && !game.loading) {

          <div class="flex-row col-gap-1">
            <button class="game-button" (click)="handleExit()">Exit</button>

            <button
              class="game-button"
              (click)="handleStartGame()"
              [disabled]="!shipSelection.readyToPlay"
            >Play</button>

            <button
              *ngIf="game.phase==='goodg'"
              class="game-button"
              (click)="handleMakeSelection()"
              [disabled]="!game.currentSelection || !game.activeTurn"
            >Hit</button>
          </div>




        } @else {
          <h1>{{ endGameMessage() }}</h1>
          <button class="game-button" (click)="handleExit()">Exit</button>
        }
      </div>

    </div>

  </div>

  <div *ngIf="game.active" class="app-body mx-auto">

    @if (shipSelection.active && !game.doneWithSelection) {
      <div class="app-ship-selector flex-wrap mt-2">
        @for (ship of [1,2,3,4,5].slice(0, $any(session.num_ships)); track ship) {
          <app-game-ship [shipLength]="ship"/>
        }
      </div>
    }

    <app-gameboard class="app-gameboard"></app-gameboard>

  </div>

}

